<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Clever AI</title>
    <!-- Core minimal landing styles (kept) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}?v={{ cache_buster }}">
    <!-- Note: Additional advanced styles live in style.css (already present in repo) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v={{ cache_buster }}">
</head>
<body>
    <!-- Accessibility + failsafe marker: If you can read this text in page source, template rendered. -->
    <noscript><div class="noscript-warning">JavaScript disabled – static fallback active.</div></noscript>

    <!-- System + particle diagnostics (legacy minimal block retained for debug visibility) -->
    <div class="status" id="legacy-debug-status">
        <h2>Clever AI</h2>
        <p>Status: <span id="system-status">Starting...</span></p>
        <p>Particles: <span id="particle-count">0</span></p>
        <p>JS Init: <span id="js-init-status">pending</span></p>
    </div>

    <!-- Particle canvas (shared by minimal + advanced systems) -->
    <canvas id="particles" aria-hidden="true"></canvas>

    <!-- Magical status overlay (manifests phrases & thinking pulses) -->
    <div id="magical-status" aria-live="polite" aria-atomic="true">
        <div class="microcopy" id="microcopy-line">Ideas crystallizing…</div>
    </div>

    <!-- Manifestation container where conversation cards will emerge from particle field -->
    <main id="manifestation-root" class="manifestation-root" role="main">
        <div id="conversation-stream" class="conversation-stream" aria-label="Dialogue Stream"></div>
        <div id="input-panel" class="input-panel glass-manifesting" data-state="idle">
            <form id="chat-form" autocomplete="off">
                <input id="user-input" name="q" type="text" placeholder="Summon a thought…" aria-label="Type your message" />
                <button id="send-btn" type="submit" aria-label="Send">Send</button>
            </form>
        </div>
    </main>

    <!-- Failure fallback (hidden unless orchestrator declares failure) -->
    <div id="fallback-panel" class="fallback-panel hidden">
        Particle system unavailable – presenting basic interface.
    </div>

    <!-- Scripts: advanced particle system + orchestrator. Order matters: chamber first, then orchestrator. -->
    <script src="{{ url_for('static', filename='js/holographic-chamber.js') }}?v={{ cache_buster }}" defer></script>
    <script src="{{ url_for('static', filename='js/magic-orchestrator.js') }}?v={{ cache_buster }}" defer></script>
    <!-- Note: Removed minimal particles-init.js from automatic load; remains available for emergency fallback via orchestrator dynamic import if needed. -->
</body>
</html>