<!DOCTYPE html>
<!--
Canonical Clever UI Template (index.html)

Why:
    Serves as the single authoritative chat + particle interface after cleanup
    of multiple experimental variants (index_new, classic, clean, working, etc.).
Where:
    Referenced by Flask home route in app.py and targeted by acceptance tests
    (tests/test_ui_brief_acceptance.py) which assert presence of #particles,
    .grid-overlay, and #chat-log placeholders.
How:
    Provides minimal structural DOM for particle canvas + ephemeral chat bubble
    system (see injected JS/CSS). Older variants removed or marked legacy in
    templates/README.md to reduce maintenance surface.
-->
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Clever AI</title>

    <!-- Single consolidated stylesheet after UI minimization -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ cache_buster }}">

    <!-- Custom minimal styles (pixels-only view) -->
    <style>
        /* Fullscreen canvas stage; center everything via particles only */
        body { margin:0; padding:0; min-height:100vh; background:#000; overflow:hidden; }

        /* Keep required elements in DOM for tests, but make them invisible */
        .grid-overlay { position:fixed; inset:0; pointer-events:none; z-index:2; opacity:0; }
        .panel { display:none; }

    /* Floating input bar: minimal, centered, glows on focus */
    .floating-input { position:fixed; left:50%; transform:translateX(-50%); bottom:24px; z-index:4; display:flex; align-items:center; justify-content:center; padding:10px 14px; background:rgba(11,15,20,0.65); backdrop-filter:blur(10px); border:1px solid rgba(105,234,203,0.20); border-radius:24px; box-shadow:0 6px 24px rgba(0,0,0,0.35); transition: box-shadow .3s ease, border-color .3s ease, background .3s ease; }
    .floating-input input { width:min(720px, 78vw); background:transparent; border:0; outline:none; color:#d9e7ef; font:500 15px Inter, system-ui, -apple-system, Segoe UI, Roboto; padding:6px 4px; letter-spacing:.1px; }
    .floating-input::before { content:""; position:absolute; inset:-1px; border-radius:24px; pointer-events:none; box-shadow:0 0 0 1px rgba(105,234,203,0.22), 0 0 18px -6px rgba(105,234,203,0.45); opacity:.6; transition:opacity .25s ease; }
    .floating-input.active, .floating-input:focus-within { background:rgba(11,15,20,0.78); border-color:rgba(105,234,203,0.35); box-shadow:0 10px 34px rgba(0,0,0,0.45); }
    .floating-input.active::before, .floating-input:focus-within::before { opacity:1; }
    /* Hide any legacy buttons if present (robustness across templates) */
    #send-btn, #mode-btn { display:none !important; }

        /* Particles stage dominates visuals */
        #particles { position:fixed; inset:0; pointer-events:none; z-index:1; opacity:1; }
    </style>
    

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; connect-src 'self';">
</head>
<body>
    <!-- Hidden particle canvas for subtle background effect -->
    <canvas id="particles" aria-hidden="true"></canvas>

    <!-- Removed debug-info element (quiet mode) -->


    <!-- Live region for screen reader announcements of new AI messages -->
    <div id="sr-live" aria-live="polite" aria-atomic="false" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
        <!-- Why: Accessibility live updates for assistive tech without visual noise -->
        <!-- Where: Updated by main.js appendMessage when role='ai' -->
        <!-- How: Text content replaced with latest AI bubble snippet -->
    </div>

    <!-- Chat stream container (ephemeral bubbles fade in/out) -->
    <div id="chat-log" aria-live="polite" class="chat-stream"></div>

    <!-- Minimal floating input bar (no persistent chat card) -->
    <!--
        Why: Provide a visible, unobtrusive place to type so users can see their text.
        Where: Replaces prior offscreen input; connects to static/js/main.js handlers.
        How: Bottom-centered glass pill that glows on focus; Enter submits to /chat.
    -->
    <div id="floating-input" class="floating-input" role="group" aria-label="Chat input">
        <input id="chat-input" type="text" autocomplete="off" placeholder="Talk to Cleverâ€¦" />
    </div>

    <!-- Grid overlay (kept for tests; fully transparent) -->
    <div class="grid-overlay" aria-hidden="true"></div>

    <!-- Core panel structure & placeholders (hidden/minimal but present for tests) -->
    <div class="panel" id="core-panel" style="display:none"></div>
    <!-- (Removed inline hidden chat-log; now visible above input) -->
    <div id="intent" style="display:none"></div>
    <div id="sentiment" style="display:none"></div>
    <div id="entities" style="display:none"></div>
    <div id="keywords" style="display:none"></div>

    <!-- Microcopy removed to keep stage fully empty unless user interacts -->

    <!-- Scripts (keeping minimal functionality) -->
    <script src="{{ url_for('static', filename='js/particles.js') }}?v={{ cache_buster }}"></script>
    <script src="{{ url_for('static', filename='js/holographic-chamber.js') }}?v={{ cache_buster }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}?v={{ cache_buster }}"></script>
    <!-- Externalized fade logic to satisfy CSP (no inline scripts) -->
    <script src="{{ url_for('static', filename='js/chat-fade.js') }}?v={{ cache_buster }}"></script>
</body>
</html>